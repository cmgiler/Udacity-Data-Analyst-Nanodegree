## Summary

Flight delays have long been a common occurrence in the commercial air travel industry, affecting hundreds of thousands of US passengers daily. However, while many have felt the frustration that often follows from a late departure, the variety of incidents that can contribute to a delayed flight are less widely known. Since 2003, the US Department of Transportation's Bureau of Transportation Statistics (DOT-BTS) has tracked the on-time performance of domestic flights operated by major airlines, and continues to make this data available to the public on a monthly basis. This visualization illustrates how flight delays have changed over time for major carriers at their airport hubs, and also gives some insight into the different factors which influence these delays.

[Project Feedback Available Here.](https://github.com/cmgiler/Udacity-Data-Analyst-Nanodegree/blob/master/6.Data-Visualization/Udacity_P6_Project_Feedback.pdf)

----------


## Design

### Version 1: Tableau / Mock-up

The first version of the visualization was a mock-up created in Tableau to reduce time in the initial design process and make edits easy according to feedback. The initial plan was to create a visualization comparing flight delays at U.S. airports for a given airline, but it was quickly discovered that including data for every airport in the country caused the chart to be unreadable. To account for this, the visualization was modified to only look at the hubs for the selected airport. Data was pre-processed in Python to merge three sets of data:

1. [Airline Flight Delay Data](https://www.transtats.bts.gov/OT_Delay/OT_DelayCause1.asp) (from Bureau of Transportation Statistics Website): Contains data for total number of delayed, diverted, and cancelled flights by month from June 2003 to December 2016, as well as delays split by delay type.
2. [Airport Geographical Data](http://stat-computing.org/dataexpo/2009/supplemental-data.html): Contains longitude and latitude coordinates for over 10,000 airports, train stations, and ferry terminals worldwide.
3. [Airport Hub Data](https://en.wikipedia.org/wiki/List_of_hub_airports): CSV file generated by a Python script which was developed to scrape and clean a list of hub airports found on Wikipedia.

The initial version was merged to a dashboard showing geo locations of each hub airport for a selected airline (Delta Airlines was selected for this example), as well as a chart showing total flight delays over time for each airport. The colors used to identify each airport were linked, and some interactivity was added to allow the user to choose an airport in the legend to highlight its corresponding geo-point and plot in the chart.

![Tableau Mock-Up](https://i.imgur.com/GLZDMva.png)


----------


### Version 2: D3.js

Feedback on the initial mockup was taken into consideration when translating the Tableau visualization into JavaScript code using D3. The D3 visualization kept a similar layout as the mockup, but added the following features:

- Buttons to quickly select a different airline for visualization. Data is only shown for the selected airline&#39;s hub airports.
- Buttons to select different metrics, which include individual delay types as well as total delays and total cancellation. Total delays and cancellations are given as a fraction of total scheduled arrivals, while individual delay types are shown as a fraction of total delays.
- Animation to line plots when a new airline or metric is selected (lines are drawn from left to right simultaneously, and x and y axes are adjusted to auto-scale to the data.
- Ability to highlight data for a given airport by hovering over the airport in the map. Data is highlighted by reducing opacity of line plots for unselected airports.
- Tooltips and chart title updates to show the user which metric and airport is being plotted.

![Initial D3 Visualization](https://i.imgur.com/QFkCXoW.png)


----------


### Version 3: D3.js

Some improvements were needed to make the charts more easily readable to the user. To accommodate the feedback that was given on the previous version, labels were added to the x axis to show years, and subtle gridlines were also included to help the viewer quickly read the values for a given data point. To answer a question related to whether or not fewer delays can be attributed to fewer total flights, another option was added to plot total flights arriving to all airport hubs for a selected carrier. Animations were also slowed down a bit to allow the viewer to see changes in the chart more clearly. The chart title was updated to give a more detailed explanation of how the metric was calculated. Finally, to clear up any confusion on how each metric is defined, a button was added at the bottom of the chart which expands a text area to give a more detailed explanation of each delay type.

![Modified D3 Visualization](https://i.imgur.com/Tx7OX8c.png)


----------


### Version 4: D3.js

Changes to the previous version were primarily made to further improve interactivity for the viewer. Tooltips were added to the chart with animated droplines to allow the viewer to see the actual value at a given point by hovering over it. The chart was updated to allow the viewer to click directly on a data point to highlight the data for that airport. A slight adjustment was also made to the coordinates of JFK and LGA airports, to avoid an issue with geo-points overlapping on the map. Finally, data given as fractions were converted to percentages to make it more apparent to the viewer what it is that the metric represents.

[View visualization on bl.ocks.org/](https://bl.ocks.org/cmgiler/raw/a171d27a841c040a7fc323fbf02fa332/)

![First Submission of D3 Visualization](https://i.imgur.com/RjMEHXn.png)


----------

### Version 5 (Final): D3.js

The first submission of the visualization was modified based on feedback from the course project review. The main issue identified by the feedback was that the submission must include an author-driven narrative at the start of the visualization. To meet this requirement, the visualization was modified to load a case study when the page is loaded. This case study walks the viewer through an analysis of the 2008 - 2010 merger between Delta and Northwest Airlines. The visualization allows the viewer to stay engaged during the walkthrough by giving a somewhat more selective amount of interactivity, and the final page suggests two other mergers that can be explored further by the viewer. The chart was also modified to line up the x-axis labels with their corresponding gridlines, as mentioned in the project review.

[View final visualization on bl.ocks.org/](https://bl.ocks.org/cmgiler/raw/9b4a2aee527cfba789d51f7dee0523c4/)

![Second Submission of D3 Visualization](https://i.imgur.com/pVZtJQq.png)


## Feedback

### Feedback for Version 1 (Tableau Mock-up)

> I like the layout of showing the map next to the line plots so you can clearly see which line corresponds to which airport visually. I also like that clicking on airport in the legend highlights that point in both the map and the chart. I think it&#39;s good that you chose to look at only hubs, because I could imagine viewing all U.S. airports at once would over-saturate the chart, and these are probably the airports which get the most Delta traffic. It looks like there&#39;s a trend of Delta flights becoming more reliable over time at all of its hub airports.

> It would be useful to see some additional information on the reasons for these flight delays. I see that you can filter by the type of delay through Tableau&#39;s filter control, but you could make it more interactive I think. Same goes for airlines – it would be nice to compare this data or the Delta airlines with other airlines as well. As far as interactivity goes, it would also be helpful to the viewer if hovering over a point on the map also highlight the line it corresponds to on the chart. Also, the legend names are cut off – maybe you could have the legend span the entire length of the graphic?

> My biggest takeaway from this visualization is that flight delays have decreased over time for Delta at most of their hubs, and large chunk of the airports seem to follow a similar trend from year to year.


----------


### Feedback for Version 2 (index\_1.html)

> After exploring the visualization, I see a general trend of delays decreasing from 2003 to present. While the values are different, it also appears that the trends aren&#39;t dependent on which hub you&#39;re looking at. It looks like the total of delays are always around 20-30%, except for Hawaiian airlines which has a much lower delay rate.

> The first thing I noticed was a spike for American Airlines delays at JFK in 2007. I did some additional research on it, and noticed that the weird spike occurred the same year that American Airlines announced that they were no longer profitable. Despite their delay rate going down, they filed for Chapter 11 bankruptcy in 2011. I found it interesting that this back-story lines up so well with the data.

> The visualization has some room for improvement. I found myself having to count the years from the left or right ends of the chart, depending on the point I was looking at, so it would be nice to have the year shown at the bottom. Some animation on the time axis would also be nice to make it known to the viewer when the scale changes. I&#39;d also suggest slowing down the y axis animation. I&#39;m not clear on what the different types of delays are either (NAS, for example). A description when hovering over the button would help with that. One question I have about the data is whether an airline or airport having less delays can be caused by having less flights per year, so having an option to see total flights would be useful, too. I also see that the delays are in percentages, but what are they percentages of?


----------


### Feedback for Version 3 (index\_2.html)

#1) 

> For Delta Airlines, the points on the map for JFK and LGA need to be more distinguished. It would also be nice to be able to select/click on the line graph and have it choose that city (in addition to being able to choose the city from the map). I think it would also be good if when you click on a city, that data will be highlighted permanently until you click anywhere else on the screen. And during this, you could hold your cursor over the data points and get the actual numbers. I think it does a good job visualizing how flight delays change over time for each airline, and I really like the transition animations.

#2) 

> The map view is nice to understand size and presence of each airline, and it&#39;s also nice that when hovering over a geo dot that it tells you the airport name. I enjoy the smooth transition of plot change when clicking on other airlines.There&#39;s a nice relationship between the plot and map views. I think the main takeaway from this visualization is to provide the customer with data to support the most reliable airline company. At first I didn&#39;t understand the types of delays, but that was solved with the description button. As far as adding anything to it, it&#39;d be cool to plot more than one airline so I can more directly compare airlines for a given airport. I&#39;d also prefer that the y axis be in % rather than decimal for easier understanding.


----------

### Feedback for Version 4 (index\_3.html)

> You've done a fabulous job analysing your dataset and focussing on a specific, clear story in the data. The problem is that the rubric asks specifically for an explanatory visualisation and at the moment yours is an excellent example of an exploratory one. All you need to do is use your exploratory visualisation to come to some conclusions. Some suggestions for starter questions:

> - Were there more/less delays at certain airports? in certain years? for certain airlines? 
> - Have you seen an improvement or decline over time? 
> - Do some airlines perform better than others?

> This clearly doesn't have to be a comprehensive answer that gives an insight into ALL your chart combinations but an introduction to the reader telling them your story and then giving them the freedom to explore your graphic and find their own - do you remember the martini glass example?

> A text box somewhere on the page outlining your story would do the trick.

> If you feel additional text will clutter your beautiful layout you could also add a splash page or overlay as a first step to your visualisation?

>Your design choices are truly fantastic. Things I love:

> - a Bootstrap layout for extra polish
> - the interactivity between the three elements - buttons, map and line chart
> - Colour coding is looking great
> - All labels are clear and accessible
> - the way you've thought carefully about the layout as a whole - button and chart placement, titles, changing subheadings

>Overall a really professional job.

> There is one problem which requires changing - your lines are not lining up with your x_axis. You either need to alter the scale or use a transform to make sure they are both inline.


## Resources

- [www.stackoverflow.com/](http://www.stackoverflow.com/) – Used for most debugging during code development
- [www.bl.ocks.org/](http://www.bl.ocks.org/) - used to find examples of features to include in visualization (e.g. drawing a map from geo.json data)
- https://raw.githubusercontent.com/johan/world.geo.json/master/countries/USA.geo.json
- http://stat-computing.org/dataexpo/2009/supplemental-data.html
- https://en.wikipedia.org/wiki/List_of_hub_airports
- https://www.transtats.bts.gov/OT_Delay/OT_DelayCause1.asp
- https://www.rita.dot.gov/bts/help/aviation/html/understanding.html


----------

## Running the Visualization Locally

Load the following files from the repository into a single folder:

 - index.html
 - visualization.css
 - draw_flight_data.js
 - light-bootstrap-dashboard.css
 - airline_delay_loc.csv

Navigate to the folder in Terminal/Command Prompt and set up a simple HTTP request handler with the following command (must have python installed):

    python -m SimpleHTTPServer
   
   Open web browser to `localhost:<port>` (Replace "\<port\>" with port number - mine is 8000)
